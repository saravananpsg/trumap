<div class="listing-tile" (click)="toggleSelectListing($event, listing)"
  [ngClass]="{'selected': (listing?.index === selectedListing?.index),
    'selected-animation-complete': animationComplete}"
  [@selectUnselect]="(listing?.index === selectedListing?.index)"
  (@selectUnselect.done)="animationDone($event)">
  <div class="inner-tile">
    <div class="listing-short-info">
      <div class="listing-header">
        <div class="level-1-holder flex flex-column flex-justify-center">
          <div class="address-title text-ellipsis">
            {{listing?.property_name | lowercase}}</div>
          <div class="address-desc text-ellipsis">{{listing?.address | lowercase}}</div>
        </div>
      </div>
      <!--<img [defaultImage]="'https://picsum.photos/300/300/?random='+ listing?.index"
       [lazyLoad]="listing?.thumbnail">-->
       <div class="listing-body">
         <img [src]="listing?.thumbnail ? listing?.thumbnail :
         'https://picsum.photos/300/300/?random='+ listing?.index">
         <div class="property-details flex flex-column d-md-none">
           <div class="rent flex flex-column">
             <label>MONTHLY RENT</label>
             <label>${{listing?.price || 0}}</label>
           </div>
           <div class="flex flex-align-center">
             <div class="bed flex-child flex-width-50">
               <span> {{ listing?.bedroom_number | ngxBedNumFormat}}
                  <i class="fa fa-bed"></i></span>
             </div>
             <div class="bath">
               <span> 1 <i class="fa fa-bath"></i></span>
             </div>
           </div>
         </div>
       </div>
      <!--<image-loader [src]="listing?.thumbnail"
        [default]="'https://picsum.photos/300/300/?random='+ listing?.index"
      >
    </image-loader>-->

      <div class="listing-footer">
        <div class="left">
          <div class="listing-index">
            {{listing?.index}}
          </div>
        </div>
        <div class="right">
          <div class="listing-status">
            {{listing?.status || 'VISITED'}}
          </div>
          <div class="liked" *ngIf="listing.liked">
            <i class="fa fa-heart"></i>
          </div>
        </div>
      </div>
    </div>

  <!-- <div [defaultImage]="'https://picsum.photos/300/300/?random=100'"
    [lazyLoad]="listing.url" class="listing-image">
  </div>-->
    <div class="listing-medium-info">
      <div class="level-2-holder flex flex-align-center">
        <div class="bed flex-child flex-width-50">
          <span> {{ listing?.bedroom_number | ngxBedNumFormat}} <i class="fa fa-bed"></i></span>
        </div>
        <div class="bath">
          <span> 1 <i class="fa fa-bath"></i></span>
        </div>
      </div>
      <div class="level-3-holder flex  flex-align-center">
        <div class="rent flex flex-column flex-child flex-width-50">
          <label>MONTHLY RENT</label>
          <label>${{listing?.price || 0}}</label>
        </div>
        <div class="sqft flex flex-column">
          <label>PSF</label>
          <label>{{listing | ngxPricePerSqftFormat }}</label>
        </div>
      </div>
    </div>
    <div class="listing-large-info">
      <div class="level-4-holder flex  flex-align-center">
        <div class=" flex flex-column flex-child flex-width-50">
          <label>PROPERTY TYPE</label>
          <label>{{listing?.property_type}}</label>
        </div>
        <div class=" flex flex-column">
          <label>SQFT</label>
          <label>{{listing?.floor_area}}</label>
        </div>
      </div>
      <div class="level-5-holder">
        <div class="group-1">
          <label class="title">PUBLIC TRANSPORT </label>
          <div class="row-1 flex ">
            <div class="flex flex-column flex-child flex-width-50">
              <label class="title"> <i class="fa fa-train"></i>MRT</label>
              <!--<label class="info">DT23 Bendemeer</label>
              <label class="info">EW11 Lavender</label>-->
              <label></label><label></label>
            </div>
            <div class=" flex flex-column">
              <label class="title"><i class="fa fa-bus-alt"></i>BUS</label>
              <!--<label>13, 67, 107, 107M, 133, 141, 145, 175, 961, 961C</label>-->
              <label></label>
            </div>
          </div>
        </div>
        <div class="group-2 flex flex-column">
          <label class="title">TIME TO</label>
          <label class="sub-title"> <i class="fa fa-map-marker-alt"></i> TOWN </label>
          <div class="flex">
            <label class="flex-child flex-width-50">
              2 Orchard Turn, Singapore 238801
            </label>
            <label class="duration">9 MINS</label>
          </div>
        </div>
        <div class="group-3 flex">
          <label class="sub-title"><i class="fa fa-plus-circle"></i>
            ADD A LOCATION
          </label>
        </div>
      </div>

      <div class="level-6-holder">
        <label>AGENT</label>
        <div class="media flex flex-align-center">
          <!--<img [defaultImage]="'https://picsum.photos/300/300/?random=2'"
           [lazyLoad]="listing?.lister_photo">-->
          <!--<img class="mr-3" src="https://picsum.photos/100/100/?random=2" alt="">-->
          <img class="mr-3" [src]="listing?.lister_photo ? listing?.lister_photo :
            'https://picsum.photos/300/300/?random=2'">
          <div class="media-body">
            <h5 class="mt-0">{{listing?.lister_name}}</h5>
            <span>Last seen: 12/08/18 7:44 PM</span>
            <i class="fa fa-comment-alt"></i>
          </div>
        </div>
        <a [href]="fullListingUrl + listing?.id_hash" target="_blank" >
          <button type="button" class="btn btn-outline-primary btn-block"
          >
          VIEW FULL LISTING
        </button>
        </a>
      </div>
      <div class="level-7-holder">
        <div class="input-group">
          <div class="input-group-prepend">
            <button class="btn btn-secondary" type="button">
                <img src="assets/images/logo@3x.png"/>
            </button>
          </div>
          <input type="text" placeholder="Questions?" class="form-control"/>
          <div class="input-group-append" (click)="sendMessage()">
             <button class="btn btn-secondary" type="button">
               <div class="icon">
                 <i class="fa fa-location-arrow"></i>
               </div>
             </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
